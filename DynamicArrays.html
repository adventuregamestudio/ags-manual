<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Dynamic Arrays</title>
  <link rel="stylesheet" href="css/normalize.css" />
  <link rel="stylesheet" href="css/main.css" />
  <link href="static/favicon.ico" rel="icon" type="image/x-icon" />
</head>
<body>


  <div class="header-bg"></div>
  <div class="container">
    <header>
      <h1>
        <a href="index.html">
          <img src="static/logo.svg" id="cup" width="48" height="48">
          AGS Manual
        </a>
      </h1>
      <label class="header_input search-box">
        <input type="search" id="search_input" placeholder="Search">
        <label class="toggle-icon" title="Match Case">
          <input type="checkbox" id="citoggle" onclick="citoggle_clicked()">
          <span>Aa</span>
        </label>
        <label class="toggle-icon" title="Match Whole Word">
          <input type="checkbox" id="wwtoggle" onclick="wwtoggle_clicked()" checked="checked">
          <span><u>ab</u></span>
        </label>
      </label>

      <label class="toggle-icon" title="Highlight">
        <input type="checkbox" id="hltoggle" onclick="hltoggle_clicked()" checked="checked">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="24px" height="24px" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" class="iconify iconify--carbon"><path fill="currentColor" d="M12 15H5a3 3 0 0 1-3-3v-2a3 3 0 0 1 3-3h5V5a1 1 0 0 0-1-1H3V2h6a3 3 0 0 1 3 3zM5 9a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h5V9zm15 14v2a1 1 0 0 0 1 1h5v-4h-5a1 1 0 0 0-1 1z"></path><path fill="currentColor" d="M2 30h28V2Zm26-2h-7a3 3 0 0 1-3-3v-2a3 3 0 0 1 3-3h5v-2a1 1 0 0 0-1-1h-6v-2h6a3 3 0 0 1 3 3Z"></path></svg>
      </label>
      
      <label class="toggle-icon" title="Toggle dark mode">
        <input type="checkbox" checked="checked"  id="dark_mode_toggle">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path fill="currentColor" d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26a5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z" /></svg>
      </label>
      
      <label class="mobile-menu">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 32 32" width="24px" fill="currentColor"><path d="M4,10h24c1.104,0,2-0.896,2-2s-0.896-2-2-2H4C2.896,6,2,6.896,2,8S2.896,10,4,10z M28,14H4c-1.104,0-2,0.896-2,2  s0.896,2,2,2h24c1.104,0,2-0.896,2-2S29.104,14,28,14z M28,22H4c-1.104,0-2,0.896-2,2s0.896,2,2,2h24c1.104,0,2-0.896,2-2  S29.104,22,28,22z" /></svg>
      </label>

      <script src="js/darkmode.js"></script>
      <script src="js/mark.min.js"></script>

      <ul id="search_results"></ul>
    </header>

  <nav>
    <ul>
      <li><a href="genindex.html">Index</a></li>
    </ul>
  </nav>

  <div class="content">
    <article>
      <main>
<section id="dynamic-arrays" class="level2">
<h2><a href="#dynamic-arrays">Dynamic Arrays</a></h2>
<section id="overview" class="level3">
<h3><a href="#overview">Overview</a></h3>
<p>Suppose that you're writing a script that you want people to be able to use in their games. You need to store the Health for every character in the game, but you don't know how many characters there will be. What do you do?</p>
<p>Dynamic Arrays are designed for just this purpose. You can declare an array like this:</p>
<p><code>int characterHealth[];</code></p>
<p>in your script file. This special notation tells AGS that you don't yet know how large you want the array to be. Now, before you use the array (so probably in game_start), you can do this:</p>
<p><code>characterHealth = new int[Game.CharacterCount];</code></p>
<p>If you forget to do this <code>new</code> command, you'll get a Null Pointer Error if you try to access the array. You can change the size of an array by simply using another <code>new</code> command with a different size; but this will erase the contents of the array in the process.</p>
<p>You may create dynamic arrays of basic types (int, char, etc), built-in types (String, Character, etc), and custom structs declared as <code>managed</code>. But currently you cannot have dynamic arrays of regular (non-managed) custom structs.</p>
<p>On another hand, you cannot have dynamic arrays inside "managed" structs as their members, but can have them anywhere else.</p>
</section>
<section id="arrays-length" class="level3">
<h3><a href="#arrays-length">Array's Length</a></h3>
<p>Dynamic array's length is its number of elements. In AGS you can access this value using a <code>Length</code> property:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode ags"><code class="sourceCode ags"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>characterHealth = <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span><span class="bu">Game</span><span class="op">.</span><span class="at">CharacterCount</span><span class="op">];</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">&lt;...&gt;</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">// later in script</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> len = characterHealth<span class="op">.</span><span class="at">Length</span><span class="op">;</span></span></code></pre></div>
<p><em>Compatibility:</em> The dynamic array's Length property is supported by <strong>AGS 3.6.2</strong> and later versions. In previous versions you would have to store created array's length in a separate integer variable.</p>
</section>
<section id="filling-a-dynamic-array" class="level3">
<h3><a href="#filling-a-dynamic-array">Filling a dynamic array</a></h3>
<p>If you have dynamic array of managed pointers, then after creation all of these pointers will be null. You must also assign individual elements one by one. For example, when you want to fill an array with already existing game objects:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode ags"><code class="sourceCode ags"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="bu">Character</span> <span class="op">*</span>groupOfChars<span class="op">[]</span> = <span class="kw">new</span> <span class="bu">Character</span><span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>groupOfChars<span class="op">[</span><span class="dv">0</span><span class="op">]</span> = cRoger<span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>groupOfChars<span class="op">[</span><span class="dv">1</span><span class="op">]</span> = cMary<span class="op">;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>groupOfChars<span class="op">[</span><span class="dv">2</span><span class="op">]</span> = cThomas<span class="op">;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>groupOfChars<span class="op">[</span><span class="dv">3</span><span class="op">]</span> = cVillager<span class="op">;</span></span></code></pre></div>
<p>Similarily, when you want to create completely new objects:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode ags"><code class="sourceCode ags"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">DynamicSprite</span> <span class="op">*</span>sprites<span class="op">[]</span> = <span class="kw">new</span> <span class="bu">DynamicSprite</span><span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>sprites<span class="op">[</span><span class="dv">0</span><span class="op">]</span> = <span class="bu">DynamicSprite</span><span class="op">.</span><span class="at">Create</span><span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>sprites<span class="op">[</span><span class="dv">1</span><span class="op">]</span> = <span class="bu">DynamicSprite</span><span class="op">.</span><span class="at">Create</span><span class="op">(</span><span class="dv">20</span><span class="op">,</span> <span class="dv">20</span><span class="op">);</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>sprites<span class="op">[</span><span class="dv">2</span><span class="op">]</span> = <span class="bu">DynamicSprite</span><span class="op">.</span><span class="at">Create</span><span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">40</span><span class="op">);</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>sprites<span class="op">[</span><span class="dv">3</span><span class="op">]</span> = <span class="bu">DynamicSprite</span><span class="op">.</span><span class="at">Create</span><span class="op">(</span><span class="dv">50</span><span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span></code></pre></div>
<p>Accessing individual elements is as simple as with regular array:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode ags"><code class="sourceCode ags"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> health = characterHealth<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> charX = groupOfChars<span class="op">[</span><span class="dv">3</span><span class="op">].</span><span class="at">x</span><span class="op">;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>sprites<span class="op">[</span><span class="dv">1</span><span class="op">].</span><span class="at">Flip</span><span class="op">(</span><span class="bu">eFlipLeftToRight</span><span class="op">);</span></span></code></pre></div>
<p>You don't <em>have</em> to fill all the array indexes of course, you may as well leave some empty (null). Just remember to keep track of that, and if your script may access empty indexes make sure to check if the element is null or not before using it:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode ags"><code class="sourceCode ags"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i = <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> sprites<span class="op">.</span><span class="at">Length</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>sprites<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> null<span class="op">)</span> <span class="op">{</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        sprites<span class="op">[</span>i<span class="op">].</span><span class="at">Flip</span><span class="op">(</span><span class="bu">eFlipLeftToRight</span><span class="op">);</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</section>
<section id="resizing-a-dynamic-array" class="level3">
<h3><a href="#resizing-a-dynamic-array">Resizing a dynamic array</a></h3>
<p>Dynamic arrays cannot be resized on their own. If later you require a bigger array, you may to do following:</p>
<ul>
<li>Create a new, larger array and save it in a temporary variable;</li>
<li>Copy all elements from the old array into the new one;</li>
<li>Assign new array to your usual array variable.</li>
</ul>
<p>For example:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode ags"><code class="sourceCode ags"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arrOfInts<span class="op">[];</span> <span class="co">// declare a dynamic array of ints</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">game_start</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    arrOfInts = <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span><span class="dv">100</span><span class="op">];</span> <span class="co">// create array of 100 ints</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">resize_array</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> tempArr<span class="op">[]</span> = <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span><span class="dv">200</span><span class="op">];</span> <span class="co">// create array of 200 ints and save it in a temp var</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i = <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> arrOfInts<span class="op">.</span><span class="at">Length</span> <span class="op">&amp;&amp;</span> i <span class="op">&lt;</span> <span class="dv">200</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        tempArr<span class="op">[</span>i<span class="op">]</span> = arrOfInts<span class="op">[</span>i<span class="op">];</span> <span class="co">// copy contents of the old array</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    arrOfInts = tempArr<span class="op">;</span> <span class="co">// assign new array to your usual variable</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>Same solution may work when you want to reduce an array to a smaller size, except in that case you'll have to loose some elements.</p>
</section>
<section id="deleting-dynamic-array" class="level3">
<h3><a href="#deleting-dynamic-array">Deleting dynamic array</a></h3>
<p>Like most of the dynamically created objects in AGS, dynamic arrays exist so long as it is assigned to at least one pointer. If you have one pointer to array, and you change its value or assign it to null, then the dynamic array will get deleted automatically:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode ags"><code class="sourceCode ags"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arrOfInts<span class="op">[];</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>arrOfInts = <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span><span class="dv">100</span><span class="op">];</span> <span class="co">// create and assign an array of 100 ints</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>arrOfInts = <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span><span class="dv">200</span><span class="op">];</span> <span class="co">// assign a new array of 200 ints; the previous one is lost and gets deleted</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>arrOfInts = null<span class="op">;</span> <span class="co">// now the second array is also lost and get deleted</span></span></code></pre></div>
<p>Note that if you store a dynamic array in a local function variable, that variable will get removed as soon as function ends, and if array was not reassigned to any global pointer, then it also gets deleted automatically.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode ags"><code class="sourceCode ags"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="fu">func</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arrOfInts<span class="op">[]</span> = <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">// do something with this array</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="co">// as soon as function ends the array gets deleted</span></span></code></pre></div>
<p>The array will not be deleted if you <em>return</em> it from the function; so long as the returned array is assigned to a pointer of course:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode ags"><code class="sourceCode ags"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">[]</span> <span class="fu">func_makearr</span><span class="op">(</span><span class="dt">int</span> size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arrOfInts<span class="op">[]</span> = <span class="kw">new</span> <span class="dt">int</span><span class="op">[</span>size<span class="op">];</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arrOfInts<span class="op">;</span> <span class="co">// not deleted just yet</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">// somewhere else in code:</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[]</span> = func_makearr<span class="op">(</span><span class="dv">100</span><span class="op">);</span> <span class="co">// the returned array will be assigned to `arr` pointer</span></span></code></pre></div>
<p><em>See also:</em> <a href="ScriptKeywords.html#arrays">Arrays</a>, <a href="ScriptKeywords.html#struct">Structs</a></p>
</section>
</section>
      <a class="edit-link" href="https://github.com/adventuregamestudio/ags-manual-source/blob/master/DynamicArrays.md" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" width="20" height="20"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg> Edit this page</a>
      </main>
      <footer>
        <p>
          <a href="jslicensing.html" data-jslicense="1">Third-party JavaScript licensing</a><br>
          Build: ed75ea05a92de6b9ff5582c5376524816e60c494
        </p>
      </footer>
    </article>
    
    <aside>
<ul>
<li><a href="#dynamic-arrays" id="toc-dynamic-arrays">Dynamic Arrays</a>
<ul>
<li><a href="#overview" id="toc-overview">Overview</a></li>
<li><a href="#arrays-length" id="toc-arrays-length">Array's Length</a></li>
<li><a href="#filling-a-dynamic-array" id="toc-filling-a-dynamic-array">Filling a dynamic array</a></li>
<li><a href="#resizing-a-dynamic-array" id="toc-resizing-a-dynamic-array">Resizing a dynamic array</a></li>
<li><a href="#deleting-dynamic-array" id="toc-deleting-dynamic-array">Deleting dynamic array</a></li>
</ul></li>
</ul>
    </aside>
  </div>




  </div>
  <script src="js/navigation.js"></script>
  <script src="js/search.js"></script>
  
</body>
</html>
