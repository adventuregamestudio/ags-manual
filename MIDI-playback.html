<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>MIDI playback</title>
  <link rel="stylesheet" href="css/normalize.css" />
  <link rel="stylesheet" href="css/main.css" />
  <link href="static/favicon.ico" rel="icon" type="image/x-icon" />
</head>
<body>


  <div class="container">
    <header>
      <label class="header_input search-box">
        <input type="search" id="search_input" placeholder="Search">
        <label class="toggle-icon" title="Match Case">
          <input type="checkbox" id="citoggle" onclick="citoggle_clicked()">
          <span>Aa</span>
        </label>
        <label class="toggle-icon" title="Match Whole Word">
          <input type="checkbox" id="wwtoggle" onclick="wwtoggle_clicked()" checked="checked">
          <span><u>ab</u></span>
        </label>
      </label>

      <label class="toggle-icon" title="Highlight">
        <input type="checkbox" id="hltoggle" onclick="hltoggle_clicked()" checked="checked">
        <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" aria-hidden="true" role="img" width="24px" height="24px" preserveAspectRatio="xMidYMid meet" viewBox="0 0 32 32" class="iconify iconify--carbon"><path fill="currentColor" d="M12 15H5a3 3 0 0 1-3-3v-2a3 3 0 0 1 3-3h5V5a1 1 0 0 0-1-1H3V2h6a3 3 0 0 1 3 3zM5 9a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h5V9zm15 14v2a1 1 0 0 0 1 1h5v-4h-5a1 1 0 0 0-1 1z"></path><path fill="currentColor" d="M2 30h28V2Zm26-2h-7a3 3 0 0 1-3-3v-2a3 3 0 0 1 3-3h5v-2a1 1 0 0 0-1-1h-6v-2h6a3 3 0 0 1 3 3Z"></path></svg>
      </label>
      
      <label class="toggle-icon" title="Toggle dark mode">
        <input type="checkbox" checked="checked"  id="dark_mode_toggle">
        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px" fill="currentColor"><path fill="currentColor" d="M12 3a9 9 0 1 0 9 9c0-.46-.04-.92-.1-1.36a5.389 5.389 0 0 1-4.4 2.26a5.403 5.403 0 0 1-3.14-9.8c-.44-.06-.9-.1-1.36-.1z" /></svg>
      </label>

      <script src="js/darkmode.js"></script>
      <script src="js/mark.min.js"></script>

      <ul id="search_results"></ul>
    </header>

  <nav>
    <h1>
      <a href="index.html">
        <svg id="cup" width="48" height="48" viewBox="0 0 12 8" preserveAspectRatio="xMidYMid meet">
          <g shape-rendering="crispEdges">
            <rect width="10" height="7" fill="#ffffff" />
            <svg y="1">
              <rect width="12" height="5" fill="#ffffff" />
            </svg>
            <svg x="1">
              <rect width="8" height="8" fill="#ffffff" />
            </svg>
            <svg x="1" y="1">
              <rect width="8" height="5" fill="#2a7fff" />
            </svg>
            <svg x="2" y="6">
              <rect width="6" height="1" fill="#2a7fff" />
            </svg>
            <svg x="9" y="2">
              <rect width="2" height="3" fill="#2a7fff" />
            </svg>
            <svg x="9" y="3">
              <rect width="1" height="1" fill="#ffffff" />
            </svg>
            <svg x="2" y="2">
              <rect width="6" height="3" fill="#0000d4" />
            </svg>
            <svg x="3" y="5">
              <rect width="4" height="1" fill="#0000d4" />
            </svg>
            <svg x="2" y="1">
              <rect width="6" height="1" fill="#ffffff" />
            </svg>
          </g>
        </svg>
        AGS Manual
      </a>
    </h1>
    <ul>
      <li><a href="genindex.html">Index</a></li>
    </ul>
<ul>
<li><a href="#midi-playback" id="toc-midi-playback">MIDI playback</a>
<ul>
<li><a href="#where-to-get-patch-files" id="toc-where-to-get-patch-files">Where to get patch files</a></li>
<li><a href="#how-to-configure-timidity" id="toc-how-to-configure-timidity">How to configure Timidity</a></li>
</ul></li>
</ul>
  </nav>

  <main>
<section id="midi-playback" class="level2">
<h2><a href="#midi-playback">MIDI playback</a></h2>
<p>MIDI is handled differently from other sound formats. MIDI files do not contain sampled audio, but instead contain control data intended to be received by MIDI compatible instruments. Since <strong>AGS 3.6.0</strong>, in order to play a MIDI file within the AGS engine the control data is passed to a software-based synthesizer known as TiMidity++ (or simply "Timidity").</p>
<p><strong>NOTE:</strong> Timidity is built into the AGS engine and does not have to be installed separately.</p>
<p><strong>NOTE:</strong> Prior to <strong>AGS 3.6.0</strong> MIDI playback on Windows would use a software-based synthesizer that was provided with the operating system. This is no longer the case; the following requirements now apply to Windows too.</p>
<p>In addition to the MIDI data and in order to generate audio, Timidity also requires Gravis Ultrasound compatible (GUS) patches files. These files provide a mapping between the MIDI data being passed in and synthesizer voices which generate audio output. The location of the patch files and the MIDI instruments which they may represent are determined through the presence of a Timidity configuration file.</p>
<section id="where-to-get-patch-files" class="level3">
<h3><a href="#where-to-get-patch-files">Where to get patch files</a></h3>
<p>While it is possible to create custom Gravis Ultrasound compatible patch files, the majority of use cases are more easily covered by downloading a pre-configured bundle of compatible patch files from the Internet. As an example of a working set of patch files which are provided with Timidity configurations, the following archive contains the patches which were originally distributed with the Gravis Ultrasound driver:</p>
<p><a href="http://www.gamers.org/pub/idgames/music/dgguspat.zip">http://www.gamers.org/pub/idgames/music/dgguspat.zip</a></p>
<p><strong>IMPORTANT:</strong> It is recommended to ensure that you have the legal right to distribute and make use of third party patch files. The examples discussed here do not confirm any legal right or endorsement with regard to their usage.</p>
</section>
<section id="how-to-configure-timidity" class="level3">
<h3><a href="#how-to-configure-timidity">How to configure Timidity</a></h3>
<p>The Timidity configuration file should be named "timidity.cfg" and should be present in the top-level of the game directory <strong>or</strong> at one of the following system paths:</p>
<p><strong>On Windows:</strong><br></p>
<ul>
<li><code>c:\timidity\timidity.cfg</code></li>
</ul>
<p><strong>On Linux and macOS</strong><br></p>
<ul>
<li><code>/etc/timidity.cfg</code></li>
<li><code>/usr/local/share/timidity/timidity.cfg</code></li>
</ul>
<p>It is also possible to indicate a specific configuration file to use by setting its path as the value of the environment variable <code>TIMIDITY_CFG</code>.</p>
<p>When distributing a game with its own configuration and patch files it is likely preferable to have the Timidity configuration file in the top-level of the game directory (so that it is located automatically) and the referenced patch files located within a sub-directory. The <code>dir</code> directive within a Timidity configuration can be used to specify an additional search path for patch files. For example, if all patch files are located within a sub-directory named "my_patches" all that is needed is the relative path name:</p>
<pre><code>dir my_patches</code></pre>
<p>The path to a patch directory can also be absolute. An absolute path which is relative to the configuration file can be specified through the use of the special token <code>$basedir</code>, which expands to the path of the directory which contains the configuration file:</p>
<pre><code>dir $basedir/my_patches</code></pre>
</section>
</section>
  </main>


  <footer>
    <p>
      <a href="jslicensing.html" data-jslicense="1">Third-party JavaScript licensing</a><br>
      Build: a7d88699bc2314914b68a65ad40c80aa2b9b132b
    </p>
  </footer>

  <script src="js/search.js"></script>
  </div>
</body>
</html>
